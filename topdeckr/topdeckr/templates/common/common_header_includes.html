<!-- Javascript Here -->
<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<script src="{{ STATIC_URL }}js/gatherer_helper.js"></script>
<script type="text/javascript">
	$().ready(function() {
		$("#card_name").keyup(function(){
			// Set Timeout
   			clearTimeout($.data(this, 'timer'));

			// Set Search String
		    	var search_string = $(this).val();

		    	// Do Search
		    	if (search_string == '') {}
			else
				$(this).data('timer', setTimeout(search, 100));
		});
	});
	function search()
	{	
		var search_value = $('#card_name').val();
		if(search_value !== '')
		{
			ajaxRequest('search_cards', {'query': search_value, 'field': 'name', 'limit': 25}, handleCardSearchData);
		}
		return false;
	}
	function ajaxRequest(operation, data, handler){	
		$.ajax({url: "/request/" + operation + "/",
			data:data,
			type: 'POST',
			cache: false,
			success: handler});
	}
	function handleCardSearchData(result){
        var cards_returned = JSON.parse(result).cards;
        var card_display = $('.card-search');
        $('.card-result').remove();
        for(var card in cards_returned){
            console.log(cards_returned[card])
            card_display.append("<div class='card-result'>" +
                    "<div class='name'>" +
                    cards_returned[card].name +
                    "</div>" +
                    "<div class='type'>" +
                    cards_returned[card].type +
                    "</div></div>");
        }
	}
</script>

<!-- CSS Here -->
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/main.css" />
